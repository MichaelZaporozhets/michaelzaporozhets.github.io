var SH={};SH.info={page:"",pageArgs:["nothing"],domain:"",holdingDomain:"",lastPage:"",root:"/",land:""},SH.refOpenFunc=function(){return!1},SH.pages={"":[],home:[],pagenotfound:[]},SH.loadPage=function(o,n){return"undefined"==typeof n&&(n=""),SH.info.page=o,SH.info.pageArgs=n,SH.log(o),SH.refOpenFunc(o,n),!1},SH.errors=[],SH.log=function(o){"undefined"!=typeof window.console.log&&console.log(o),SH.errors.push(o)},SH.history={},SH.history.currentPage,SH.history.currentPageArgs=[],SH.history.stop=!1,SH.open=function(o){SH.history.pushState?window.history.pushState("",o,"/"+SH.info.root+o):document.location.hash="#!/"+o},SH.history.manage=function(){var o=function(){"undefined"!=typeof SH.pages[n]?("undefined"!=typeof SH.pages[n][0]&&"undefined"!=typeof SH.pages[n][0].sub?"undefined"!=typeof SH.pages[n][0].sub[e]?(SH.info.page=n+"_"+e,SH.loadPage(n+"_"+e,i)):"undefined"!=typeof SH.pages[n]?SH.loadPage(n,i):SH.open("pagenotfound"):SH.loadPage(n,i),SH.info.lastPage=SH.history.currentPage,SH.history.currentPage=n):SH.open("pagenotfound")};if(1==SH.history.pushState&&"#!/"!==document.location.hash.substr(0,3)){var n=window.location.pathname.replace(SH.info.root,""),t="";if("/"==n&&""==SH.info.land&&(n="/home"),"/"==n.substr(0,1)&&(n=n.substr(1)),t=n.split(":")[0],null!==n&&""!==n&&"/"!==n){"undefined"!==n.split(":")[1]&&(SH.history.currentPageArgs=[],SH.history.currentPageArgs.push(n.split(":")[1])),n=n.split(":")[0];var e=n.split("/")[1],i=n.split("/");n=n.split("/")[0],t!==SH.info.pageArgs.join("/")&&o()}else SH.info.page=SH.info.land,SH.open(SH.info.land)}else{var a=document.location.hash;if(1==SH.history.pushState)return SH.open(a.substr(3)),!1;if(a.length>1&&window.location.pathname.substr(1)==SH.info.root){if("#!/"==a.substr(0,3)){"#!/"==a&&(a="#!/home"),a=a.substr(3).split("#")[0],"undefined"!==a.split(":")[1]&&(SH.history.currentPageArgs=[],SH.history.currentPageArgs.push(a.split(":")[1])),a=a.split(":")[0];var e=a.split("/")[1];a=a.split("/")[0];var i=document.location.hash.substr(3).split("/");if(document.location.hash.substr(3)!==SH.info.pageArgs.join("/")){var n=a;o()}}}else"/"!==window.location.pathname.replace(SH.info.root,"")?(SH.history.stop=!0,window.location.assign("/"+SH.info.root+"#!/"+window.location.pathname.replace(SH.info.root,"").substr(1))):(SH.info.page=SH.info.land,SH.open(SH.info.land))}},SH.history.patrol=function(o){SH.history.manage(),setInterval(function(){0==SH.history.stop&&SH.history.manage()},200),o(!0)},SH.init=function(o,n){var t=function(o,n){var t=n.forceFallback;"undefined"==typeof t&&(t=!0),SH.history.pushState=!1,history.pushState&&0==t&&(SH.history.pushState=!0),"undefined"==typeof o?SH.log("Simpler History: You must declare the main handler as the first argument of SH.init."):(SH.refOpenFunc=o,SH.history.patrol(function(o){1==o&&SH.log("Simpler History Initialized...")}))};window.addEventListener?window.addEventListener("load",function(){t(o,n)},!1):window.attachEvent&&window.attachEvent("onload",function(){t(o,n)})};