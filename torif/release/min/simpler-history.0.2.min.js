var SH={};SH.info={page:"",pageArgs:[],domain:"",holdingDomain:"",lastPage:"",root:"/"},SH.refOpenFunc=function(){return!1},SH.pages={home:[],pagenotfound:[]},SH.loadPage=function(o,t){return"undefined"==typeof t&&(t=""),SH.info.page=o,SH.info.pageArgs=t,SH.refOpenFunc(o,t),!1},SH.history={},SH.history.currentPage,SH.history.currentPageArgs=[],SH.history.stop=!1,SH.open=function(o){SH.history.pushState?window.history.pushState("",o,"/"+SH.info.root+o):document.location.hash="#!/"+o},SH.history.manage=function(){var o=function(){"undefined"!=typeof SH.pages[t]?("undefined"!=typeof SH.pages[t][0]&&"undefined"!=typeof SH.pages[t][0].sub?"undefined"!=typeof SH.pages[t][0].sub[e]?(SH.info.page=t+"_"+e,SH.loadPage(t+"_"+e,i)):"undefined"!=typeof SH.pages[t]?SH.loadPage(t,i):SH.open("pagenotfound"):SH.loadPage(t,i),SH.info.lastPage=SH.history.currentPage,SH.history.currentPage=t):SH.open("pagenotfound")};if(1==SH.history.pushState&&"#!/"!==document.location.hash.substr(0,3)){var t=window.location.pathname.replace(SH.info.root,""),n="";if("/"==t.substr(0,1)&&(t=t.substr(1)),n=t.split(":")[0],null!==t&&""!==t&&"/"!==t){"undefined"!==t.split(":")[1]&&(SH.history.currentPageArgs=[],SH.history.currentPageArgs.push(t.split(":")[1])),t=t.split(":")[0];var e=t.split("/")[1],i=t.split("/");t=t.split("/")[0],n!==SH.info.pageArgs.join("/")&&o()}else SH.info.page="home",SH.open("home")}else{var a=document.location.hash;if(1==SH.history.pushState)return SH.open(a.substr(3)),!1;if(a.length>1&&window.location.pathname.substr(1)==SH.info.root){if("#!/"==a.substr(0,3)){a=a.substr(3).split("#")[0],"undefined"!==a.split(":")[1]&&(SH.history.currentPageArgs=[],SH.history.currentPageArgs.push(a.split(":")[1])),a=a.split(":")[0];var e=a.split("/")[1];a=a.split("/")[0];var i=document.location.hash.substr(3).split("/");if(document.location.hash.substr(3)!==SH.info.pageArgs.join("/")){var t=a;o()}}}else"/"!==window.location.pathname.replace(SH.info.root,"")?(SH.history.stop=!0,window.location.assign("/"+SH.info.root+"#!/"+window.location.pathname.replace(SH.info.root,"").substr(1))):(SH.info.page="home",SH.open("home"))}},SH.history.patrol=function(o){SH.history.manage(),setInterval(function(){0==SH.history.stop&&SH.history.manage()},200),o(!0)},SH.init=function(o,t){var n=function(o,t){var n=t.forceFallback;"undefined"==typeof n&&(n=!0),SH.history.pushState=!1,history.pushState&&0==n&&(SH.history.pushState=!0),"undefined"==typeof o?console.log("Simpler History: You must declare the main handler as the first argument of SH.init."):(SH.refOpenFunc=o,SH.history.patrol(function(o){1==o&&console.log("Simpler History Initialized...")}))};window.addEventListener?window.addEventListener("load",function(){n(o,t)},!1):window.attachEvent&&window.attachEvent("onload",function(){n(o,t)})};